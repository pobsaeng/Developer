{"version":3,"file":"prompts/expand.js","sourceRoot":"../src","sources":["prompts/expand.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,2EAA2E;AAC3E,2EAA2E;AAE3E,iCAAkC;AAClC,qCAA8B;AAC9B,wDAAiD;AAGjD,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAEnC,kBAAkC,SAAQ,gBAAM;IAE/C,YAAY,QAAa,EAAE,cAAwB;QAClD,KAAK,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;IACjC,CAAC;IAEM,MAAM;QACZ,6EAA6E;QAC7E,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE;YACpC,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;SACpD;aAAM;YACN,OAAO,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;SAC1D;IACF,CAAC;IAEO,eAAe,CAAC,OAA+B;QACtD,IAAI,OAAO,GAAG,IAAI,CAAC,uBAAuB,CAAC;QAC3C,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;QAE7C,OAAO,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,EAAE,OAAO,CAAC;aAClD,IAAI,CAAC,MAAM,CAAC,EAAE;YACd,IAAI,MAAM,KAAK,SAAS,EAAE;gBACzB,MAAM,IAAI,yBAAe,EAAE,CAAC;aAC5B;YAED,OAAO,IAAI,CAAC,iBAAiB,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;IACL,CAAC;IACO,qBAAqB,CAAC,OAA2B;QACxD,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE;YAClE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC;YACnC,OAAO,MAAM,CAAC;QACf,CAAC,EAAE,EAAE,CAAC,CAAC;QAEP,IAAI,OAAO,GAAG,IAAI,CAAC,uBAAuB,CAAC;QAC3C,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;QAE7C,OAAO,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC;aACjE,IAAI,CAAC,MAAM,CAAC,EAAE;YACd,IAAI,MAAM,KAAK,SAAS,EAAE;gBACzB,MAAM,IAAI,yBAAe,EAAE,CAAC;aAC5B;YAED,iDAAiD;YACjD,IAAI,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC;YAC3C,OAAO,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,iBAAiB,CAAC,KAAU;QACnC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YAC1B,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC;SACrB;QACD,OAAO,KAAK,CAAC;IACd,CAAC;IAEO,QAAQ,CAAC,KAAU;QAC1B,MAAM,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAEnG,IAAI,eAAe,EAAE;YACpB,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,GAAG,OAAO,CAAC,OAAO,IAAI,eAAe,EAAE,CAAC;YACjE,OAAO,KAAK,CAAC;SACb;QACD,OAAO,IAAI,CAAC;IACb,CAAC;CACD;AAjED,+BAiEC","sourcesContent":["'use strict';\n\n// This code is originally from https://github.com/DonJayamanne/bowerVSCode\n// License: https://github.com/DonJayamanne/bowerVSCode/blob/master/LICENSE\n\nimport vscode = require('vscode');\nimport Prompt from './prompt';\nimport EscapeException from '../escapeException';\nimport { INameValueChoice } from './question';\n\nconst figures = require('figures');\n\nexport default class ExpandPrompt extends Prompt {\n\n\tconstructor(question: any, ignoreFocusOut?: boolean) {\n\t\tsuper(question, ignoreFocusOut);\n\t}\n\n\tpublic render(): any {\n\t\t// label indicates this is a quickpick item. Otherwise it's a name-value pair\n\t\tif (this._question.choices[0].label) {\n\t\t\treturn this.renderQuickPick(this._question.choices);\n\t\t} else {\n\t\t\treturn this.renderNameValueChoice(this._question.choices);\n\t\t}\n\t}\n\n\tprivate renderQuickPick(choices: vscode.QuickPickItem[]): any {\n\t\tlet options = this.defaultQuickPickOptions;\n\t\toptions.placeHolder = this._question.message;\n\n\t\treturn vscode.window.showQuickPick(choices, options)\n\t\t\t.then(result => {\n\t\t\t\tif (result === undefined) {\n\t\t\t\t\tthrow new EscapeException();\n\t\t\t\t}\n\n\t\t\t\treturn this.validateAndReturn(result || false);\n\t\t\t});\n\t}\n\tprivate renderNameValueChoice(choices: INameValueChoice[]): any {\n\t\tconst choiceMap = this._question.choices.reduce((result, choice) => {\n\t\t\tresult[choice.name] = choice.value;\n\t\t\treturn result;\n\t\t}, {});\n\n\t\tlet options = this.defaultQuickPickOptions;\n\t\toptions.placeHolder = this._question.message;\n\n\t\treturn vscode.window.showQuickPick(Object.keys(choiceMap), options)\n\t\t\t.then(result => {\n\t\t\t\tif (result === undefined) {\n\t\t\t\t\tthrow new EscapeException();\n\t\t\t\t}\n\n\t\t\t\t// Note: cannot be used with 0 or false responses\n\t\t\t\tlet returnVal = choiceMap[result] || false;\n\t\t\t\treturn this.validateAndReturn(returnVal);\n\t\t\t});\n\t}\n\n\tprivate validateAndReturn(value: any): any {\n\t\tif (!this.validate(value)) {\n\t\t\treturn this.render();\n\t\t}\n\t\treturn value;\n\t}\n\n\tprivate validate(value: any): boolean {\n\t\tconst validationError = this._question.validate ? this._question.validate(value || '') : undefined;\n\n\t\tif (validationError) {\n\t\t\tthis._question.message = `${figures.warning} ${validationError}`;\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n}\n"]}