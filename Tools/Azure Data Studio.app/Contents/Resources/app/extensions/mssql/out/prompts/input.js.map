{"version":3,"file":"prompts/input.js","sourceRoot":"../src","sources":["prompts/input.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,2EAA2E;AAC3E,2EAA2E;AAE3E,mCAAiD;AACjD,qCAA8B;AAC9B,wDAAiD;AAEjD,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAEnC,iBAAiC,SAAQ,gBAAM;IAI9C,YAAY,QAAa,EAAE,cAAwB;QAClD,KAAK,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;QAEhC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,sBAAsB,CAAC;QAC5C,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;IAC/C,CAAC;IAED,yEAAyE;IAClE,MAAM,KAAK,UAAU,KAAa,OAAO,OAAO,CAAC,CAAC,CAAC;IAEnD,MAAM;QACZ,oDAAoD;QACpD,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC;QAE/F,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,YAAY,KAAK,EAAE;YAC5C,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC;YAC7C,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,SAAS,CAAC;SACnC;QAED,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,WAAW,CAAC;QAExC,OAAO,eAAM,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC;aACvC,IAAI,CAAC,MAAM,CAAC,EAAE;YACd,IAAI,MAAM,KAAK,SAAS,EAAE;gBACzB,MAAM,IAAI,yBAAe,EAAE,CAAC;aAC5B;YAED,IAAI,MAAM,KAAK,EAAE,EAAE;gBAClB,oCAAoC;gBACpC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,IAAI,EAAE,CAAC;aACtC;YAED,MAAM,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YAEpG,IAAI,eAAe,EAAE;gBACpB,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,IAAI,KAAK,CAAC,GAAG,OAAO,CAAC,OAAO,IAAI,eAAe,EAAE,CAAC,CAAC;gBAE5E,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC;aACrB;YAED,OAAO,MAAM,CAAC;QACf,CAAC,CAAC,CAAC;IACL,CAAC;CACD;AA/CD,8BA+CC","sourcesContent":["'use strict';\n\n// This code is originally from https://github.com/DonJayamanne/bowerVSCode\n// License: https://github.com/DonJayamanne/bowerVSCode/blob/master/LICENSE\n\nimport { window, InputBoxOptions } from 'vscode';\nimport Prompt from './prompt';\nimport EscapeException from '../escapeException';\n\nconst figures = require('figures');\n\nexport default class InputPrompt extends Prompt {\n\n\tprotected _options: InputBoxOptions;\n\n\tconstructor(question: any, ignoreFocusOut?: boolean) {\n\t\tsuper(question, ignoreFocusOut);\n\n\t\tthis._options = this.defaultInputBoxOptions;\n\t\tthis._options.prompt = this._question.message;\n\t}\n\n\t// Helper for callers to know the right type to get from the type factory\n\tpublic static get promptType(): string { return 'input'; }\n\n\tpublic render(): any {\n\t\t// Prefer default over the placeHolder, if specified\n\t\tlet placeHolder = this._question.default ? this._question.default : this._question.placeHolder;\n\n\t\tif (this._question.default instanceof Error) {\n\t\t\tplaceHolder = this._question.default.message;\n\t\t\tthis._question.default = undefined;\n\t\t}\n\n\t\tthis._options.placeHolder = placeHolder;\n\n\t\treturn window.showInputBox(this._options)\n\t\t\t.then(result => {\n\t\t\t\tif (result === undefined) {\n\t\t\t\t\tthrow new EscapeException();\n\t\t\t\t}\n\n\t\t\t\tif (result === '') {\n\t\t\t\t\t// Use the default value, if defined\n\t\t\t\t\tresult = this._question.default || '';\n\t\t\t\t}\n\n\t\t\t\tconst validationError = this._question.validate ? this._question.validate(result || '') : undefined;\n\n\t\t\t\tif (validationError) {\n\t\t\t\t\tthis._question.default = new Error(`${figures.warning} ${validationError}`);\n\n\t\t\t\t\treturn this.render();\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t});\n\t}\n}\n"]}